#------------------------------------------------------------------------------
# @file Makefile
# @author charlesj
# @date 2014-05-20 11:01:11.882981
# @brief Makefile for Fortran90 compilation
# 
# Makefile for Fortran90 compilation
# 
# This file was generated by Kppa: http://www.paratools.com/Kppa
#------------------------------------------------------------------------------


FC = ftn
#FC = gfortran
LD = $(FC)

OPT_FLAGS = -O3 -fopenmp
WARN_FLAGS = -Wall
PREC_FLAGS = -fdefault-real-8 -fdefault-double-8 -fbounds-check -fimplicit-none

FFLAGS = $(OPT_FLAGS) $(WARN_FLAGS) $(PREC_FLAGS)
LDFLAGS = $(OPT_FLAGS)
LIBS =

OBJ = box_model_integrate.o \
      box_model_jacobian.o \
      box_model_main.o \
      box_model_parameters.o \
      box_model_rosenbrock.o \
      box_model_blas.o \
      box_model_rates.o \
      box_model_function.o \
      box_model_sparse.o \
      box_model_decomp.o \
      box_model_solve.o \
      box_model_initialize.o \
      box_model_driver_parameters.o \
      box_model_monitor.o \
      Wrap_NETCDF.o

EXE = box_model.exe

all: $(EXE)

$(EXE):  $(OBJ)
	$(LD) -o $(EXE) $(LDFLAGS) $(OBJ) $(LIBS)

wrap_netcdf.mod: Wrap_NETCDF.f90 
	$(FC) -I$(NETCDF_DIR) -c -fopenmp $(FFLAGS) -o Wrap_NETCDF.o Wrap_NETCDF.f90

box_model_integrate.o: box_model_integrate.f90 \
        box_model_parameters.mod \
        box_model_rosenbrock.o
	$(FC) -c $(FFLAGS) box_model_integrate.f90 

box_model_jacobian.o: box_model_jacobian.f90 \
        box_model_parameters.mod \
        box_model_sparse.o
	$(FC) -c $(FFLAGS) box_model_jacobian.f90 

box_model_main.o: box_model_main.f90 \
        box_model_parameters.mod \
        box_model_integrate.o \
        box_model_initialize.o \
        box_model_driver_parameters.mod \
        box_model_monitor.o \
	wrap_netcdf.mod
	$(FC) -c -fopenmp $(FFLAGS) box_model_main.f90 

box_model_parameters.mod: box_model_parameters.f90
	$(FC) -c $(FFLAGS) box_model_parameters.f90

box_model_rosenbrock.o: box_model_rosenbrock.f90 \
        box_model_parameters.mod \
        box_model_blas.o \
        box_model_rates.o \
        box_model_function.o \
        box_model_decomp.o \
        box_model_solve.o \
        box_model_jacobian.o
	$(FC) -c $(FFLAGS) box_model_rosenbrock.f90 

box_model_blas.o: box_model_blas.f90 \
        box_model_parameters.mod
	$(FC) -c $(FFLAGS) box_model_blas.f90 

box_model_rates.o: box_model_rates.f90 \
        box_model_parameters.mod
	$(FC) -c $(FFLAGS) box_model_rates.f90 

box_model_function.o: box_model_function.f90 \
        box_model_parameters.mod \
        box_model_sparse.o
	$(FC) -c $(FFLAGS) box_model_function.f90 

box_model_sparse.o: box_model_sparse.f90
	$(FC) -c $(FFLAGS) box_model_sparse.f90 

box_model_decomp.o: box_model_decomp.f90 \
        box_model_parameters.mod \
        box_model_sparse.o
	$(FC) -c $(FFLAGS) box_model_decomp.f90 

box_model_solve.o: box_model_solve.f90 \
        box_model_parameters.mod \
        box_model_sparse.o
	$(FC) -c $(FFLAGS) box_model_solve.f90 

box_model_initialize.o: box_model_initialize.f90 \
        box_model_parameters.mod
	$(FC) -c $(FFLAGS) box_model_initialize.f90 

box_model_driver_parameters.mod: box_model_driver_parameters.f90
	$(FC) -c $(FFLAGS) box_model_driver_parameters.f90

box_model_monitor.o: box_model_monitor.f90 \
        box_model_parameters.mod
	$(FC) -c $(FFLAGS) box_model_monitor.f90 


clean:
	rm -f box_model.exe box_model.dat boxmodel.* *.o *.mod

destroy: clean
	rm -f *.f90 Makefile

#----------------------------- END Makefile END -------------------------------
