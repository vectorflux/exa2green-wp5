In this section,  we present two different frameworks  deployed on HPC
systems  to  measure the  power  consumption  and  performance of  the
baseline execution. 

\subsection{Framework description}
\label{subsec:3.1}

\subsubsection{E3METER metering products}
Supercomputer  clusters considered  for our  experiments at  the Swiss
National Supercomputing Center of  ETH Zurich (CSCS) are equipped with
E3METER Intelligent  Power Strips (IPS)  and Monitors (IPM)  which are
high  quality  electricity meters  released  by  Riedo Networks,  that
enable to monitor  and log power consumption of  the IT infrastructure
as  well as  constantly analyze  line voltage,  current, power-factor,
frequency  with  1\% accuracy.   Using  reliable narrowband  powerline
communication (PLC)  technology, all  metering and power  quality data
from   each  IPS  are   centrally  collected   by  the   E3METER  Data
Concentrator, via the existing power cables thus avoiding the need for
extra cabling.   This data  is made available  via SNMP,  HTTP, TELNET
through  the built-in  Fast  Ethernet port.   Time synchronization  is
guaranteed by  using NTP servers.   Measured data is  accessed through
the open source  Cacti software including the E3METER  Cacti Plugin to
scan the entire PLC network  and monitor the power usage of individual
rack in real-time.

\subsubsection{University of Hamburg}
To assess the  performance and the energy efficiency  of COSMO-ART, we
employ   a    version   of   the    integrated   framework   presented
in~\cite{energy13}  that  works in  combination  with VampirTrace  and
Vampir,   which  are   profiling/tracing   and  visualization   tools,
respectively.
%The left part of the \vref{fig:Lustre} offers a graphical representation of
%the Lustre architecture; the right depicts the tracing and profiling framework.
To  use our  approach,  COSMO-ART is  compiled  using the  VampirTrace
compiler wrappers, which automatically  instrument the Fortran code of
the  model. Next,  COSMO-ART is  run  on the  nodes, thus  dissipating
certain  amount of  power.  The  server nodes  are connected  to power
measurement  devices that  account for  the  dissipated power/consumed
energy and  send the power data  to the tracing  server.  The attached
VampirTrace \pmlib plugin employs the client API that sends start/stop
primitives in order to gather captured data by the wattmeters onto the
tracing server,  where an  instance of the  \pmlib server  is running.
Once COSMO-ART run is finished, the VampirTrace \pmlib plugin receives
the  power   data  from  the  tracing   server.   The  instrumentation
post-processing generates  the performance trace files  and the \pmlib
plugin inserts the power data into them.

In  addition  to the  power  measurements,  we  also account  for  the
resource utilization values  of the nodes: CPU load,  memory usage and
storage device utilization. % and network utilization.  

We  run special  \pmlib  server  instances on  the  server nodes  that
retrieve these  values from the \texttt{proc}  file system (leveraging
the  \texttt{psutil} Python library).   Thus, \pmlib  plugin instances
running  with the  instrumented  application connect  with the  \pmlib
servers.   Finally,   using  the   Vampir   visualization  tool,   the
power-performance traces  can be easily  analyzed through a  series of
plots and statistics.
