In this section,  we present two different frameworks  deployed on HPC
systems  to  measure the  power  consumption  and  performance of  the
baseline execution.

\subsection{Framework description}
\label{subsec:3.1}

\subsubsection{CSCS - E3METER metering products}
Supercomputer  clusters considered  for our  experiments at  the Swiss
National Supercomputing Center (CSCS)  of ETH Zurich are equipped with
E3METER Intelligent  Power Strips (IPS)  and Monitors (IPM)  which are
high   quality   electricity  meters   released   by  Riedo   Networks
(\url{http://riedonetworks.com/}),  that  enable  to monitor  and  log
power  consumption of  the  IT infrastructure  as  well as  constantly
analyze  line  voltage,  current,  power-factor,  frequency  with  1\%
accuracy.   Using reliable  narrowband  powerline communication  (PLC)
technology,  all metering  and power  quality data  from each  IPS are
centrally collected by the E3METER Data Concentrator, via the existing
power cables thus  avoiding the need for extra  cabling.  This data is
made  available  via SNMP,  HTTP,  TELNET  through  the built-in  Fast
Ethernet  port.   Time  synchronisation  is guaranteed  by  using  NTP
servers.   Measured data  is accessed  through the  open  source Cacti
software including  the E3METER  Cacti Plugin to  scan the  entire PLC
network and monitor  in real-time the power usage  of individual rack,
recorded in 5 minutes interval periods.

\subsubsection{Power-performance measurement framework at UJI}

To assess the  performance and the energy efficiency  of COSMO-ART, we
employ   a    version   of   the \pmlib power measurement framework~\cite{energy13} that works in  combination with Extrae and Paraver~\ref{paraver},
which are profiling/tracing and visualization tools, respectively.

To use our approach, COSMO-ART is compiled using the Extrae library, 
which  automatically instruments the Fortran  code of  the
model in order to generate traces that record, e.g., MPI calls.
Next, COSMO-ART  is run on the nodes,  thus dissipating certain
amount  of power. These nodes are connected to power measurement devices that account
for the dissipated power/consumed energy and send the power data to the tracing server. 
The client,  meanwhile, sends start/stop  primitives  in  order  to  gather  captured  data  by  these PDUs onto the  tracing server, where an instance  of the \pmlib server is running.

Once COSMO-ART run is finished, trace files containing the power profile 
using the power data  received from the tracing server and the
instrumentation trace files are generated.
Afterwards, the combination of both trace files in Paraver allows us 
to visualise and correlate the performance trace with the power profile of COSMO-ART.

%Once COSMO-ART run is finished, the VampirTrace \pmlib plugin receives
%the  power   data  from  the  tracing   server.   The  instrumentation
%post-processing generates  the performance trace files  and the \pmlib
%plugin inserts the power data into them.

%In  addition  to the  power  measurements,  we  also account  for  the
%resource utilization values  of the nodes: CPU load,  memory usage and
%storage device utilization. % and network utilization.

%We  run special  \pmlib  server  instances on  the  server nodes  that
%retrieve these  values from the \texttt{proc}  file system (leveraging
%the  \texttt{psutil} Python library).   Thus, \pmlib  plugin instances
%running  with the  instrumented  application connect  with the  \pmlib
%servers.   Finally,   using  the   Vampir   visualization  tool,   the
%power-performance traces  can be easily  analyzed through a  series of
%plots and statistics.
